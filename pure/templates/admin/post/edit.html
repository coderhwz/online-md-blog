{% extends "admin/layout.html" %}
{% block head %}
<script src="{{ url_for('static',filename = 'vendor/codemirror/lib/codemirror.js') }}" type="text/javascript" charset="utf-8"></script>
<link rel="stylesheet" href="{{ url_for('static',filename='vendor/codemirror/lib/codemirror.css')}}" type="text/css" media="screen" charset="utf-8">
<script src="{{ url_for('static',filename = 'vendor/codemirror/mode/markdown/markdown.js') }}" type="text/javascript" charset="utf-8"></script>
<script src="http://cdn.staticfile.org/jquery/2.0.0/jquery.min.js" type="text/javascript" charset="utf-8"></script>
<script src="{{ url_for('static',filename = 'js/admin.js') }}" type="text/javascript" charset="utf-8"></script>
{% endblock %}
{% block body %}
<form action="{{ url_for("edit_post") }}" method="POST" class="post-form" accept-charset="utf-8">
    <textarea name="markdown" id="editor">{{ post.markdown }}</textarea>
    <input type="hidden" name="id" value="{{ post.id }}" />
    
    <div class="fixed">
        <a class="list" href="{{ url_for('list_posts') }}" >文章列表</a>
        <a class="view" href="{{ url_for('show_post',slug=post.slug) }}" target="_blank" >查看文章</a>
        <a class="settings"href="{{ url_for('settings') }}" >设置</a>
        <input class="save" type="submit" value="保存" />
    </div>
</form>
{% endblock %}

{% block foot %}
    <script type="text/javascript">
        var myCodeMirror = CodeMirror.fromTextArea(document.getElementById('editor'),{
            viewportMargin:Infinity,
            //theme:'eclipse',
        });
    </script>
{% endblock %}
